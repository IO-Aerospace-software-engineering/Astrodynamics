\hypertarget{ManeuverBase_8h_source}{}\doxysection{Maneuver\+Base.\+h}
\label{ManeuverBase_8h_source}\index{IO.Astrodynamics/Maneuvers/ManeuverBase.h@{IO.Astrodynamics/Maneuvers/ManeuverBase.h}}
\mbox{\hyperlink{ManeuverBase_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{ Copyright (c) 2021-\/2023. Sylvain Guillet (sylvain.guillet@tutamail.com)}}
\DoxyCodeLine{3 \textcolor{comment}{ */}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#ifndef MANEUVER\_BASE\_H}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#define MANEUVER\_BASE\_H}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <set>}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{ManeuverResult_8h}{ManeuverResult.h}}>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{Propagator_8h}{Propagator.h}}>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{DynamicFuelTank_8h}{DynamicFuelTank.h}}>}}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{keyword}{using namespace }std::chrono\_literals;}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceIO_1_1Astrodynamics_1_1Propagators}{IO::Astrodynamics::Propagators}}}
\DoxyCodeLine{18 \{}
\DoxyCodeLine{19     \textcolor{keyword}{class }\mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Propagators_1_1Propagator}{Propagator}};}
\DoxyCodeLine{20 \}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceIO_1_1Astrodynamics_1_1Maneuvers}{IO::Astrodynamics::Maneuvers}}}
\DoxyCodeLine{23 \{}
\DoxyCodeLine{28     \textcolor{keyword}{class }\mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase}{ManeuverBase}}}
\DoxyCodeLine{29     \{}
\DoxyCodeLine{30     \textcolor{keyword}{private}:}
\DoxyCodeLine{36         \textcolor{keywordtype}{double} GetRemainingAvgFuelFlow();}
\DoxyCodeLine{37 }
\DoxyCodeLine{43         \textcolor{keywordtype}{double} GetRemainingAvgISP();}
\DoxyCodeLine{44 }
\DoxyCodeLine{50         \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Time_1_1TimeSpan}{IO::Astrodynamics::Time::TimeSpan}} GetMinimumRemainingThrustDuration();}
\DoxyCodeLine{51 }
\DoxyCodeLine{58         \textcolor{keywordtype}{double} Burn(\textcolor{keyword}{const} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Time_1_1TimeSpan}{IO::Astrodynamics::Time::TimeSpan}} \&duration);}
\DoxyCodeLine{59 }
\DoxyCodeLine{66         \mbox{\hyperlink{structIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverResult}{IO::Astrodynamics::Maneuvers::ManeuverResult}} Validate();}
\DoxyCodeLine{67 }
\DoxyCodeLine{74         [[nodiscard]] \textcolor{keywordtype}{bool} IsValid() \textcolor{keyword}{const};}
\DoxyCodeLine{75 }
\DoxyCodeLine{80         \textcolor{keywordtype}{void} ExecuteAt(\textcolor{keyword}{const} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1OrbitalParameters_1_1OrbitalParameters}{IO::Astrodynamics::OrbitalParameters::OrbitalParameters}} \&maneuverPoint);}
\DoxyCodeLine{81 }
\DoxyCodeLine{86         \textcolor{keywordtype}{void} SpreadThrust();}
\DoxyCodeLine{87 }
\DoxyCodeLine{88         \textcolor{keyword}{const} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Time_1_1TimeSpan}{IO::Astrodynamics::Time::TimeSpan}} m\_attitudeHoldDuration;}
\DoxyCodeLine{89         std::unique\_ptr<IO::Astrodynamics::Time::Window<IO::Astrodynamics::Time::TDB>> m\_attitudeWindow\{\};}
\DoxyCodeLine{90 }
\DoxyCodeLine{91         std::unique\_ptr<IO::Astrodynamics::Time::Window<IO::Astrodynamics::Time::TDB>> m\_maneuverWindow\{\};}
\DoxyCodeLine{92 }
\DoxyCodeLine{93     \textcolor{keyword}{protected}:}
\DoxyCodeLine{94         std::unique\_ptr<IO::Astrodynamics::Time::Window<IO::Astrodynamics::Time::TDB>> \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_ab332981af61592a313c2d457336aecef}{m\_thrustWindow}}\{\};}
\DoxyCodeLine{95         std::unique\_ptr<IO::Astrodynamics::Math::Vector3D> \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_aa03c493048a065510bf4a7b4b2a660a2}{m\_deltaV}}\{\};}
\DoxyCodeLine{96         \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Time_1_1TimeSpan}{IO::Astrodynamics::Time::TimeSpan}} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a5a9181858407c946e75c8880d978be29}{m\_thrustDuration}}\{0.0s\};}
\DoxyCodeLine{97         \textcolor{keywordtype}{double} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a554d750635d630c62d3e52930d92a7d2}{m\_fuelBurned}}\{\};}
\DoxyCodeLine{98         \textcolor{keyword}{const} std::vector<IO::Astrodynamics::Body::Spacecraft::Engine*> \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_aeba2ea76c45031a6b5b590c29ab9ce6f}{m\_engines}}\{\};}
\DoxyCodeLine{99         std::unique\_ptr<IO::Astrodynamics::Time::TDB> \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a201eb8bc90f6f6bb85aa355a25d86c1f}{m\_minimumEpoch}}\{\};}
\DoxyCodeLine{100         \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase}{ManeuverBase}} *\mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a9396a43a23f13217db06250486991248}{m\_nextManeuver}}\{\};}
\DoxyCodeLine{101         \textcolor{keywordtype}{bool} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a4aa7c13c2dbfdb354cf9af76f82d938e}{m\_isValid}}\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{102         \textcolor{keyword}{const} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Body_1_1Spacecraft_1_1Spacecraft}{IO::Astrodynamics::Body::Spacecraft::Spacecraft}} \&\mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a148ef8f914319909a7803f4cda03777b}{m\_spacecraft}};}
\DoxyCodeLine{103         \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Propagators_1_1Propagator}{IO::Astrodynamics::Propagators::Propagator}} \&\mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a870a8a9ce9bf4bc2807ef3dd2028a28a}{m\_propagator}};}
\DoxyCodeLine{104         std::vector<ManeuverBase *> \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a4fbbbdf3979a324a4ef9cb77fe66e78a}{m\_subManeuvers}}\{\};}
\DoxyCodeLine{105         std::set<const IO::Astrodynamics::Body::Spacecraft::FuelTank *> \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_ab04ebb42df11298a6cf9d6571c60a6ab}{m\_fuelTanks}};}
\DoxyCodeLine{106         std::map<const IO::Astrodynamics::Body::Spacecraft::FuelTank *, IO::Astrodynamics::Maneuvers::DynamicFuelTank> \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a8458f00212105adca3b9860f08beb69f}{m\_dynamicFuelTanks}};}
\DoxyCodeLine{107         \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Time_1_1TimeSpan}{IO::Astrodynamics::Time::TimeSpan}} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a8efadf4d0f2b08935bc6c95deaa793b1}{m\_maneuverHoldDuration}}\{0.0s\};}
\DoxyCodeLine{108 }
\DoxyCodeLine{114         \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_aa15287e13d3ac642ad0756ea63e9db47}{ManeuverBase}}(std::vector<IO::Astrodynamics::Body::Spacecraft::Engine*> engines, \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Propagators_1_1Propagator}{IO::Astrodynamics::Propagators::Propagator}} \&propagator);}
\DoxyCodeLine{115 }
\DoxyCodeLine{122         \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_aa15287e13d3ac642ad0756ea63e9db47}{ManeuverBase}}(std::vector<IO::Astrodynamics::Body::Spacecraft::Engine*> engines, \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Propagators_1_1Propagator}{IO::Astrodynamics::Propagators::Propagator}} \&propagator, \textcolor{keyword}{const} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Time_1_1TDB}{IO::Astrodynamics::Time::TDB}} \&minimumEpoch);}
\DoxyCodeLine{123 }
\DoxyCodeLine{131         \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_aa15287e13d3ac642ad0756ea63e9db47}{ManeuverBase}}(std::vector<IO::Astrodynamics::Body::Spacecraft::Engine*> engines, \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Propagators_1_1Propagator}{IO::Astrodynamics::Propagators::Propagator}} \&propagator,}
\DoxyCodeLine{132                      \textcolor{keyword}{const} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Time_1_1TimeSpan}{IO::Astrodynamics::Time::TimeSpan}} \&attitudeHoldDuration);}
\DoxyCodeLine{133 }
\DoxyCodeLine{142         \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_aa15287e13d3ac642ad0756ea63e9db47}{ManeuverBase}}(std::vector<IO::Astrodynamics::Body::Spacecraft::Engine*> engines, \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Propagators_1_1Propagator}{IO::Astrodynamics::Propagators::Propagator}} \&propagator, \textcolor{keyword}{const} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Time_1_1TDB}{IO::Astrodynamics::Time::TDB}} \&minimumEpoch,}
\DoxyCodeLine{143                      \textcolor{keyword}{const} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Time_1_1TimeSpan}{IO::Astrodynamics::Time::TimeSpan}} \&attitudeHoldDuration);}
\DoxyCodeLine{144 }
\DoxyCodeLine{150         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a1df25da25e0f4c14744f9b37f29dad90}{Compute}}(\textcolor{keyword}{const} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1OrbitalParameters_1_1OrbitalParameters}{IO::Astrodynamics::OrbitalParameters::OrbitalParameters}} \&maneuverPoint) = 0;}
\DoxyCodeLine{151 }
\DoxyCodeLine{158         \textcolor{keyword}{virtual} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1OrbitalParameters_1_1StateOrientation}{IO::Astrodynamics::OrbitalParameters::StateOrientation}} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a9f13935c641a5c447000e5e8cbe54f19}{ComputeOrientation}}(\textcolor{keyword}{const} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1OrbitalParameters_1_1OrbitalParameters}{IO::Astrodynamics::OrbitalParameters::OrbitalParameters}} \&maneuverPoint) = 0;}
\DoxyCodeLine{159 }
\DoxyCodeLine{160     \textcolor{keyword}{public}:}
\DoxyCodeLine{166         \textcolor{keywordtype}{void} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a402b2cba078061f515b00e63c8179858}{Handle}}(\textcolor{keyword}{const} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Time_1_1TDB}{IO::Astrodynamics::Time::TDB}} \&notBeforeEpoch);}
\DoxyCodeLine{167 }
\DoxyCodeLine{175         \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a9bc46694a197868297955930c9edd531}{CanExecute}}(\textcolor{keyword}{const} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1OrbitalParameters_1_1OrbitalParameters}{IO::Astrodynamics::OrbitalParameters::OrbitalParameters}} \&maneuverPoint) = 0;}
\DoxyCodeLine{176 }
\DoxyCodeLine{182         \mbox{\hyperlink{structIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverResult}{IO::Astrodynamics::Maneuvers::ManeuverResult}} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a5d34d331d703837ccc1ed54e506671d1}{TryExecute}}(\textcolor{keyword}{const} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1OrbitalParameters_1_1OrbitalParameters}{IO::Astrodynamics::OrbitalParameters::OrbitalParameters}} \&maneuverPoint);}
\DoxyCodeLine{183 }
\DoxyCodeLine{189         [[nodiscard]] \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Time_1_1Window}{IO::Astrodynamics::Time::Window<IO::Astrodynamics::Time::TDB>}} *\mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_af40a795082bf5b39573f9ce23495d6a7}{GetThrustWindow}}() \textcolor{keyword}{const};}
\DoxyCodeLine{190 }
\DoxyCodeLine{196         [[nodiscard]] \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Time_1_1Window}{IO::Astrodynamics::Time::Window<IO::Astrodynamics::Time::TDB>}} *\mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a478e08783afb471c4f7fdaa74c3ea355}{GetAttitudeWindow}}() \textcolor{keyword}{const};}
\DoxyCodeLine{197 }
\DoxyCodeLine{204         [[nodiscard]] \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Time_1_1Window}{IO::Astrodynamics::Time::Window<IO::Astrodynamics::Time::TDB>}} *\mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_accf195d53d09b805b5ffacc9a153c099}{GetManeuverWindow}}() \textcolor{keyword}{const};}
\DoxyCodeLine{205 }
\DoxyCodeLine{211         [[nodiscard]] \textcolor{keywordtype}{double} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a2ce52d7031bc50826e44f6737e6b2366}{GetFuelBurned}}() \textcolor{keyword}{const};}
\DoxyCodeLine{212 }
\DoxyCodeLine{218         [[nodiscard]] \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Time_1_1TimeSpan}{IO::Astrodynamics::Time::TimeSpan}} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a820003d88c46c172a09c513a1aeda102}{GetThrustDuration}}() \textcolor{keyword}{const};}
\DoxyCodeLine{219 }
\DoxyCodeLine{225         [[nodiscard]] \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Math_1_1Vector3D}{IO::Astrodynamics::Math::Vector3D}} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_ac0bbc086eb0ec39c6e085e524ef0622c}{GetDeltaV}}() \textcolor{keyword}{const};}
\DoxyCodeLine{226 }
\DoxyCodeLine{233         \textcolor{keyword}{virtual} \mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase}{IO::Astrodynamics::Maneuvers::ManeuverBase}} \&\mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase_a27a97352fcc9ad6fb5592f9f76f19a01}{SetNextManeuver}}(\mbox{\hyperlink{classIO_1_1Astrodynamics_1_1Maneuvers_1_1ManeuverBase}{IO::Astrodynamics::Maneuvers::ManeuverBase}} \&maneuver);}
\DoxyCodeLine{234     \};}
\DoxyCodeLine{235 \}}
\DoxyCodeLine{236 }
\DoxyCodeLine{237 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
